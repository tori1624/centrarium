---
layout: post
title: "ggvis"
author: "Young Ho Lee"
date: "2018.04.06"
categories: ggvis
---




{% highlight r %}
# Basic packages
library(ggvis)
library(dplyr)

# Define image sizes
img.width <- 450
img.height <- 300
{% endhighlight %}

# 1. Introduction

{% highlight r %}
ggvis1 <- mtcars %>%
  ggvis(x = ~wt, y = ~mpg) %>%
  layer_points() %>%
  set_options(width = img.width, height = img.height)
ggvis
{% endhighlight %}



{% highlight text %}
## function (data = NULL, ..., env = parent.frame()) 
## {
##     vis <- structure(list(marks = list(), data = list(), props = list(), 
##         reactives = list(), scales = list(), axes = list(), legends = list(), 
##         controls = list(), connectors = list(), handlers = list(), 
##         options = list(), cur_data = NULL, cur_props = NULL, 
##         cur_vis = NULL), class = "ggvis")
##     vis <- add_data(vis, data, deparse2(substitute(data)))
##     vis <- add_props(vis, ..., env = env)
##     vis
## }
## <environment: namespace:ggvis>
{% endhighlight %}


{% highlight r %}
mtcars %>%
  ggvis(x = ~mpg, y = ~disp) %>%
  mutate(disp = disp / 61.0237) %>% # convert engine displacement to litres
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id761787638-container" class="ggvis-output-container">
<div id="plot_id761787638" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id761787638_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id761787638" data-renderer="svg">SVG</a>
 | 
<a id="plot_id761787638_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id761787638" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id761787638_download" class="ggvis-download" data-plot-id="plot_id761787638">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id761787638_spec = {
  "data": [
    {
      "name": ".0/mutate1",
      "format": {
        "type": "csv",
        "parse": {
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"mpg\",\"disp\"\n21,2.62193213456411\n21,2.62193213456411\n22.8,1.76980419083078\n21.4,4.22786556698463\n18.7,5.89934730276925\n18.1,3.68709206423078\n14.3,5.89934730276925\n24.4,2.40398402587847\n22.8,2.30730027841642\n19.2,2.74647391095591\n17.8,2.74647391095591\n16.4,4.51955551695489\n17.3,4.51955551695489\n15.2,4.51955551695489\n10.4,7.73469979696413\n10.4,7.53805488687182\n14.7,7.21031337005131\n32.4,1.28966286868872\n30.4,1.24050164116565\n33.9,1.16512109229693\n21.5,1.96808780850719\n15.5,5.21109011744617\n15.2,4.98167105567181\n13.3,5.735476544359\n19.2,6.55483033641028\n27.3,1.29457899144103\n26,1.97136522367539\n30.4,1.55841091248154\n15.8,5.75186362020002\n19.7,2.37612599694873\n15,4.93250982814874\n21.4,1.98283617676411"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.836642157063567\n8.06317873219749"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/mutate1"
          }
        }
      },
      "from": {
        "data": ".0/mutate1"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id761787638").parseSpec(plot_id761787638_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~mpg, ~disp, stroke = ~vs) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id276361059-container" class="ggvis-output-container">
<div id="plot_id276361059" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id276361059_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id276361059" data-renderer="svg">SVG</a>
 | 
<a id="plot_id276361059_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id276361059" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id276361059_download" class="ggvis-download" data-plot-id="plot_id276361059">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id276361059_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "vs": "number",
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"vs\",\"mpg\",\"disp\"\n0,21,160\n0,21,160\n1,22.8,108\n1,21.4,258\n0,18.7,360\n1,18.1,225\n0,14.3,360\n1,24.4,146.7\n1,22.8,140.8\n1,19.2,167.6\n1,17.8,167.6\n0,16.4,275.8\n0,17.3,275.8\n0,15.2,275.8\n0,10.4,472\n0,10.4,460\n0,14.7,440\n1,32.4,78.7\n1,30.4,75.7\n1,33.9,71.1\n1,21.5,120.1\n0,15.5,318\n0,15.2,304\n0,13.3,350\n0,19.2,400\n1,27.3,79\n0,26,120.3\n1,30.4,95.1\n0,15.8,351\n0,19.7,145\n0,15,301\n1,21.4,121"
    },
    {
      "name": "scale/stroke",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n1"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n51.055\n492.045"
    }
  ],
  "scales": [
    {
      "name": "stroke",
      "domain": {
        "data": "scale/stroke",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": ["#132B43", "#56B1F7"]
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "stroke": {
            "scale": "stroke",
            "field": "data.vs"
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [
    {
      "orient": "right",
      "stroke": "stroke",
      "title": "vs"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id276361059").parseSpec(plot_id276361059_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~mpg, ~disp, fill = ~vs) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id982485706-container" class="ggvis-output-container">
<div id="plot_id982485706" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id982485706_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id982485706" data-renderer="svg">SVG</a>
 | 
<a id="plot_id982485706_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id982485706" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id982485706_download" class="ggvis-download" data-plot-id="plot_id982485706">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id982485706_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "vs": "number",
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"vs\",\"mpg\",\"disp\"\n0,21,160\n0,21,160\n1,22.8,108\n1,21.4,258\n0,18.7,360\n1,18.1,225\n0,14.3,360\n1,24.4,146.7\n1,22.8,140.8\n1,19.2,167.6\n1,17.8,167.6\n0,16.4,275.8\n0,17.3,275.8\n0,15.2,275.8\n0,10.4,472\n0,10.4,460\n0,14.7,440\n1,32.4,78.7\n1,30.4,75.7\n1,33.9,71.1\n1,21.5,120.1\n0,15.5,318\n0,15.2,304\n0,13.3,350\n0,19.2,400\n1,27.3,79\n0,26,120.3\n1,30.4,95.1\n0,15.8,351\n0,19.7,145\n0,15,301\n1,21.4,121"
    },
    {
      "name": "scale/fill",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n1"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n51.055\n492.045"
    }
  ],
  "scales": [
    {
      "name": "fill",
      "domain": {
        "data": "scale/fill",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": ["#132B43", "#56B1F7"]
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "size": {
            "value": 50
          },
          "fill": {
            "scale": "fill",
            "field": "data.vs"
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [
    {
      "orient": "right",
      "fill": "fill",
      "title": "vs"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id982485706").parseSpec(plot_id982485706_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~mpg, ~disp, size = ~vs) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id767369375-container" class="ggvis-output-container">
<div id="plot_id767369375" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id767369375_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id767369375" data-renderer="svg">SVG</a>
 | 
<a id="plot_id767369375_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id767369375" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id767369375_download" class="ggvis-download" data-plot-id="plot_id767369375">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id767369375_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "vs": "number",
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"vs\",\"mpg\",\"disp\"\n0,21,160\n0,21,160\n1,22.8,108\n1,21.4,258\n0,18.7,360\n1,18.1,225\n0,14.3,360\n1,24.4,146.7\n1,22.8,140.8\n1,19.2,167.6\n1,17.8,167.6\n0,16.4,275.8\n0,17.3,275.8\n0,15.2,275.8\n0,10.4,472\n0,10.4,460\n0,14.7,440\n1,32.4,78.7\n1,30.4,75.7\n1,33.9,71.1\n1,21.5,120.1\n0,15.5,318\n0,15.2,304\n0,13.3,350\n0,19.2,400\n1,27.3,79\n0,26,120.3\n1,30.4,95.1\n0,15.8,351\n0,19.7,145\n0,15,301\n1,21.4,121"
    },
    {
      "name": "scale/size",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n1"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n51.055\n492.045"
    }
  ],
  "scales": [
    {
      "name": "size",
      "domain": {
        "data": "scale/size",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": [20, 100]
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "scale": "size",
            "field": "data.vs"
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [
    {
      "orient": "right",
      "size": "size",
      "title": "vs"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id767369375").parseSpec(plot_id767369375_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~mpg, ~disp, shape = ~factor(cyl)) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id146301648-container" class="ggvis-output-container">
<div id="plot_id146301648" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id146301648_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id146301648" data-renderer="svg">SVG</a>
 | 
<a id="plot_id146301648_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id146301648" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id146301648_download" class="ggvis-download" data-plot-id="plot_id146301648">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id146301648_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"factor(cyl)\",\"mpg\",\"disp\"\n\"6\",21,160\n\"6\",21,160\n\"4\",22.8,108\n\"6\",21.4,258\n\"8\",18.7,360\n\"6\",18.1,225\n\"8\",14.3,360\n\"4\",24.4,146.7\n\"4\",22.8,140.8\n\"6\",19.2,167.6\n\"6\",17.8,167.6\n\"8\",16.4,275.8\n\"8\",17.3,275.8\n\"8\",15.2,275.8\n\"8\",10.4,472\n\"8\",10.4,460\n\"8\",14.7,440\n\"4\",32.4,78.7\n\"4\",30.4,75.7\n\"4\",33.9,71.1\n\"4\",21.5,120.1\n\"8\",15.5,318\n\"8\",15.2,304\n\"8\",13.3,350\n\"8\",19.2,400\n\"4\",27.3,79\n\"4\",26,120.3\n\"4\",30.4,95.1\n\"8\",15.8,351\n\"6\",19.7,145\n\"8\",15,301\n\"4\",21.4,121"
    },
    {
      "name": "scale/shape",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"4\"\n\"6\"\n\"8\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n51.055\n492.045"
    }
  ],
  "scales": [
    {
      "name": "shape",
      "type": "ordinal",
      "domain": {
        "data": "scale/shape",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "shapes"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "shape": {
            "scale": "shape",
            "field": "data.factor(cyl)"
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [
    {
      "orient": "right",
      "shape": "shape",
      "title": "factor(cyl)"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id146301648").parseSpec(plot_id146301648_spec);
</script><!--/html_preserve-->


{% highlight r %}
# If you want to make the points a fixed colour or size, you need to use :=
mtcars %>% 
  ggvis(~mpg, ~disp, fill := "red", stroke := "black") %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id577191216-container" class="ggvis-output-container">
<div id="plot_id577191216" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id577191216_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id577191216" data-renderer="svg">SVG</a>
 | 
<a id="plot_id577191216_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id577191216" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id577191216_download" class="ggvis-download" data-plot-id="plot_id577191216">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id577191216_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "mpg": "number",
          "disp": "number"
        }
      },
      "values": "\"mpg\",\"disp\"\n21,160\n21,160\n22.8,108\n21.4,258\n18.7,360\n18.1,225\n14.3,360\n24.4,146.7\n22.8,140.8\n19.2,167.6\n17.8,167.6\n16.4,275.8\n17.3,275.8\n15.2,275.8\n10.4,472\n10.4,460\n14.7,440\n32.4,78.7\n30.4,75.7\n33.9,71.1\n21.5,120.1\n15.5,318\n15.2,304\n13.3,350\n19.2,400\n27.3,79\n26,120.3\n30.4,95.1\n15.8,351\n19.7,145\n15,301\n21.4,121"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n51.055\n492.045"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "size": {
            "value": 50
          },
          "fill": {
            "value": "red"
          },
          "stroke": {
            "value": "black"
          },
          "x": {
            "scale": "x",
            "field": "data.mpg"
          },
          "y": {
            "scale": "y",
            "field": "data.disp"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "disp"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id577191216").parseSpec(plot_id577191216_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~wt, ~mpg, size := 300, opacity := 0.4) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id726241490-container" class="ggvis-output-container">
<div id="plot_id726241490" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id726241490_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id726241490" data-renderer="svg">SVG</a>
 | 
<a id="plot_id726241490_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id726241490" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id726241490_download" class="ggvis-download" data-plot-id="plot_id726241490">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id726241490_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 300
          },
          "opacity": {
            "value": 0.4
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id726241490").parseSpec(plot_id726241490_spec);
</script><!--/html_preserve-->

# 2. Interaction

{% highlight r %}
mtcars %>%
  ggvis(~wt, ~mpg,
        size := input_slider(10, 100),
        opacity := input_slider(0, 1)) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id672819052-container" class="ggvis-output-container">
<div id="plot_id672819052" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id672819052_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id672819052" data-renderer="svg">SVG</a>
 | 
<a id="plot_id672819052_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id672819052" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id672819052_download" class="ggvis-download" data-plot-id="plot_id672819052">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id672819052_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "reactive_128107292": "number",
          "reactive_370747725": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"reactive_128107292\",\"reactive_370747725\",\"wt\",\"mpg\"\n55,0.5,2.62,21\n55,0.5,2.875,21\n55,0.5,2.32,22.8\n55,0.5,3.215,21.4\n55,0.5,3.44,18.7\n55,0.5,3.46,18.1\n55,0.5,3.57,14.3\n55,0.5,3.19,24.4\n55,0.5,3.15,22.8\n55,0.5,3.44,19.2\n55,0.5,3.44,17.8\n55,0.5,4.07,16.4\n55,0.5,3.73,17.3\n55,0.5,3.78,15.2\n55,0.5,5.25,10.4\n55,0.5,5.424,10.4\n55,0.5,5.345,14.7\n55,0.5,2.2,32.4\n55,0.5,1.615,30.4\n55,0.5,1.835,33.9\n55,0.5,2.465,21.5\n55,0.5,3.52,15.5\n55,0.5,3.435,15.2\n55,0.5,3.84,13.3\n55,0.5,3.845,19.2\n55,0.5,1.935,27.3\n55,0.5,2.14,26\n55,0.5,1.513,30.4\n55,0.5,3.17,15.8\n55,0.5,2.77,19.7\n55,0.5,3.57,15\n55,0.5,2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "field": "data.reactive_128107292"
          },
          "opacity": {
            "field": "data.reactive_370747725"
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id672819052").parseSpec(plot_id672819052_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>%
  ggvis(~wt) %>%
  layer_histograms(width = input_slider(0, 2, step = 0.10, label = "width"),
                   center = input_slider(0, 2, step = 0.05, label = "center")c)
{% endhighlight %}



{% highlight text %}
## Error: <text>:4:78: unexpected symbol
## 3:   layer_histograms(width = input_slider(0, 2, step = 0.10, label = "width"),
## 4:                    center = input_slider(0, 2, step = 0.05, label = "center")c
##                                                                                 ^
{% endhighlight %}


{% highlight r %}
# Press the left and right arrows to control the size of the points in the next example.
keys_s <- left_right(10, 1000, step = 50) # up_down()
mtcars %>%
  ggvis(~wt, ~mpg, size := keys_s, opacity := 0.5) %>%
  layer_points()
{% endhighlight %}

<!--html_preserve--><div id="plot_id488954131-container" class="ggvis-output-container">
<div id="plot_id488954131" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id488954131_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id488954131" data-renderer="svg">SVG</a>
 | 
<a id="plot_id488954131_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id488954131" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id488954131_download" class="ggvis-download" data-plot-id="plot_id488954131">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id488954131_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "reactive_531122094": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"reactive_531122094\",\"wt\",\"mpg\"\n505,2.62,21\n505,2.875,21\n505,2.32,22.8\n505,3.215,21.4\n505,3.44,18.7\n505,3.46,18.1\n505,3.57,14.3\n505,3.19,24.4\n505,3.15,22.8\n505,3.44,19.2\n505,3.44,17.8\n505,4.07,16.4\n505,3.73,17.3\n505,3.78,15.2\n505,5.25,10.4\n505,5.424,10.4\n505,5.345,14.7\n505,2.2,32.4\n505,1.615,30.4\n505,1.835,33.9\n505,2.465,21.5\n505,3.52,15.5\n505,3.435,15.2\n505,3.84,13.3\n505,3.845,19.2\n505,1.935,27.3\n505,2.14,26\n505,1.513,30.4\n505,3.17,15.8\n505,2.77,19.7\n505,3.57,15\n505,2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "field": "data.reactive_531122094"
          },
          "opacity": {
            "value": 0.5
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id488954131").parseSpec(plot_id488954131_spec);
</script><!--/html_preserve-->


{% highlight r %}
mtcars %>% ggvis(~wt, ~mpg) %>% 
  layer_points() %>% 
  add_tooltip(function(df) df$wt)
{% endhighlight %}

<!--html_preserve--><div id="plot_id953718917-container" class="ggvis-output-container">
<div id="plot_id953718917" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id953718917_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id953718917" data-renderer="svg">SVG</a>
 | 
<a id="plot_id953718917_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id953718917" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id953718917_download" class="ggvis-download" data-plot-id="plot_id953718917">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id953718917_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id953718917").parseSpec(plot_id953718917_spec);
</script><!--/html_preserve-->

# 3. Layers
## (1) Simple layers

{% highlight r %}
df <- data.frame(x = 1:10, y = runif(10))
df %>%
  ggvis(~x, ~y) %>%
  layer_paths()
{% endhighlight %}

<!--html_preserve--><div id="plot_id973468811-container" class="ggvis-output-container">
<div id="plot_id973468811" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id973468811_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id973468811" data-renderer="svg">SVG</a>
 | 
<a id="plot_id973468811_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id973468811" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id973468811_download" class="ggvis-download" data-plot-id="plot_id973468811">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id973468811_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "x": "number",
          "y": "number"
        }
      },
      "values": "\"x\",\"y\"\n1,0.180338768055663\n2,0.216899876482785\n3,0.680162917589769\n4,0.498845610534772\n5,0.641679348424077\n6,0.660284349229187\n7,0.0960241581778973\n8,0.765600163955241\n9,0.769674804294482\n10,0.990712312282994"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.55\n10.45"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.0512897504726425\n1.03544671998825"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "x": {
            "scale": "x",
            "field": "data.x"
          },
          "y": {
            "scale": "y",
            "field": "data.y"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id973468811").parseSpec(plot_id973468811_spec);
</script><!--/html_preserve-->


{% highlight r %}
t <- seq(0, 2 * pi, length.out = 100)
df <- data.frame(x = sin(t), y = cos(t))
df %>%
  ggvis(~x, ~y) %>%
  layer_paths(fill := "red")
{% endhighlight %}

<!--html_preserve--><div id="plot_id450264484-container" class="ggvis-output-container">
<div id="plot_id450264484" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id450264484_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id450264484" data-renderer="svg">SVG</a>
 | 
<a id="plot_id450264484_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id450264484" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id450264484_download" class="ggvis-download" data-plot-id="plot_id450264484">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id450264484_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "x": "number",
          "y": "number"
        }
      },
      "values": "\"x\",\"y\"\n0,1\n0.0634239196565645,0.997986676471884\n0.126592453573749,0.991954812830795\n0.18925124436041,0.981928697262707\n0.251147987181079,0.967948701396356\n0.312033445698487,0.950071117740945\n0.371662455660328,0.928367933016073\n0.429794912089172,0.902926538286621\n0.486196736100469,0.873849377069785\n0.540640817455598,0.841253532831181\n0.59290792905464,0.805270257531059\n0.642787609686539,0.766044443118978\n0.690079011482112,0.72373403810507\n0.734591708657533,0.678509411557132\n0.776146464291757,0.630552667084523\n0.814575952050336,0.580056909571198\n0.849725429949514,0.527225467610502\n0.881453363447582,0.472271074772683\n0.909631995354518,0.415415013001886\n0.934147860265107,0.356886221591872\n0.954902241444074,0.296920375328275\n0.971811568323542,0.235758935509427\n0.984807753012208,0.17364817766693\n0.993838464461254,0.110838199901011\n0.998867339183008,0.0475819158237422\n0.999874127673875,-0.015865963834808\n0.996854775951942,-0.0792499568567885\n0.989821441880933,-0.142314838273285\n0.978802446214779,-0.204806668065191\n0.963842158559942,-0.266473813690035\n0.945000818714668,-0.327067963317422\n0.922354294104581,-0.386345125693129\n0.895993774291336,-0.444066612605774\n0.866025403784438,-0.5\n0.832569854634771,-0.55392006386611\n0.795761840530832,-0.605609687137667\n0.755749574354258,-0.654860733945285\n0.712694171378863,-0.701474887706321\n0.666769000516292,-0.745264449675755\n0.618158986220605,-0.786053094742788\n0.567059863862771,-0.823676581429833\n0.513677391573406,-0.857983413234977\n0.458226521727411,-0.888835448654923\n0.400930535406614,-0.91610845743207\n0.342020143325669,-0.939692620785908\n0.28173255684143,-0.959492973614497\n0.220310532786541,-0.975429786885407\n0.15800139597335,-0.987438888676394\n0.0950560433041824,-0.995471922573085\n0.0317279334980677,-0.999496542383185\n-0.0317279334980679,-0.999496542383185\n-0.0950560433041826,-0.995471922573085\n-0.15800139597335,-0.987438888676394\n-0.220310532786541,-0.975429786885407\n-0.28173255684143,-0.959492973614497\n-0.342020143325669,-0.939692620785908\n-0.400930535406614,-0.91610845743207\n-0.45822652172741,-0.888835448654923\n-0.513677391573406,-0.857983413234977\n-0.567059863862771,-0.823676581429833\n-0.618158986220605,-0.786053094742787\n-0.666769000516292,-0.745264449675755\n-0.712694171378863,-0.701474887706321\n-0.755749574354258,-0.654860733945285\n-0.795761840530832,-0.605609687137667\n-0.832569854634771,-0.55392006386611\n-0.866025403784439,-0.5\n-0.895993774291336,-0.444066612605774\n-0.922354294104581,-0.386345125693129\n-0.945000818714668,-0.327067963317422\n-0.963842158559942,-0.266473813690035\n-0.978802446214779,-0.204806668065191\n-0.989821441880933,-0.142314838273285\n-0.996854775951942,-0.0792499568567888\n-0.999874127673875,-0.0158659638348076\n-0.998867339183008,0.0475819158237424\n-0.993838464461254,0.110838199901011\n-0.984807753012208,0.17364817766693\n-0.971811568323542,0.235758935509427\n-0.954902241444074,0.296920375328275\n-0.934147860265107,0.356886221591872\n-0.909631995354518,0.415415013001887\n-0.881453363447582,0.472271074772683\n-0.849725429949514,0.527225467610502\n-0.814575952050336,0.580056909571198\n-0.776146464291757,0.630552667084523\n-0.734591708657533,0.678509411557132\n-0.690079011482112,0.72373403810507\n-0.64278760968654,0.766044443118978\n-0.59290792905464,0.805270257531059\n-0.540640817455597,0.841253532831181\n-0.486196736100469,0.873849377069785\n-0.429794912089172,0.902926538286621\n-0.371662455660327,0.928367933016073\n-0.312033445698487,0.950071117740945\n-0.251147987181079,0.967948701396356\n-0.18925124436041,0.981928697262707\n-0.126592453573749,0.991954812830795\n-0.0634239196565645,0.997986676471884\n-2.44921270764475e-16,1"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-1.09986154044126\n1.09986154044126"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-1.09947136950234\n1.09997482711916"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "x": {
            "scale": "x",
            "field": "data.x"
          },
          "y": {
            "scale": "y",
            "field": "data.y"
          },
          "fill": {
            "value": "red"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id450264484").parseSpec(plot_id450264484_spec);
</script><!--/html_preserve-->


{% highlight r %}
df <- data.frame(x = 1:10, y = runif(10))
df %>%
  ggvis(~x, ~y) %>%
  layer_ribbons()
{% endhighlight %}

<!--html_preserve--><div id="plot_id842679478-container" class="ggvis-output-container">
<div id="plot_id842679478" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id842679478_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id842679478" data-renderer="svg">SVG</a>
 | 
<a id="plot_id842679478_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id842679478" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id842679478_download" class="ggvis-download" data-plot-id="plot_id842679478">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id842679478_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "x": "number",
          "y": "number"
        }
      },
      "values": "\"x\",\"y\"\n1,0.461186464643106\n2,0.315241752425209\n3,0.174675893969834\n4,0.531573540763929\n5,0.493637016043067\n6,0.779308625962585\n7,0.204178342828527\n8,0.713397278916091\n9,0.0652161117177457\n10,0.354206798831001"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.55\n10.45"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.0295114860055037\n0.815013251674827"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "area",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.x"
          },
          "y": {
            "scale": "y",
            "field": "data.y"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id842679478").parseSpec(plot_id842679478_spec);
</script><!--/html_preserve-->


{% highlight r %}
df <- data.frame(x = 1:10, y = runif(10))
df %>%
  ggvis(~x, ~y + 0.1, y2 = ~y - 0.1) %>%
  layer_ribbons()
{% endhighlight %}

<!--html_preserve--><div id="plot_id434360065-container" class="ggvis-output-container">
<div id="plot_id434360065" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id434360065_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id434360065" data-renderer="svg">SVG</a>
 | 
<a id="plot_id434360065_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id434360065" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id434360065_download" class="ggvis-download" data-plot-id="plot_id434360065">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id434360065_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "y - 0.1": "number",
          "x": "number",
          "y + 0.1": "number"
        }
      },
      "values": "\"y - 0.1\",\"x\",\"y + 0.1\"\n0.173818245157599,1,0.373818245157599\n0.470044951047748,2,0.670044951047748\n0.235719080641866,3,0.435719080641866\n0.496262788865715,4,0.696262788865715\n0.0915180315263569,5,0.291518031526357\n0.847763937758282,6,1.04776393775828\n0.442480408679694,7,0.642480408679694\n0.444603393413126,8,0.644603393413126\n0.178597153956071,9,0.378597153956071\n0.346702469140291,10,0.546702469140291"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.55\n10.45"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.0437057362147607\n1.09557623306988"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "area",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "y2": {
            "scale": "y",
            "field": "data.y - 0\\.1"
          },
          "x": {
            "scale": "x",
            "field": "data.x"
          },
          "y": {
            "scale": "y",
            "field": "data.y + 0\\.1"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y + 0.1"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id434360065").parseSpec(plot_id434360065_spec);
</script><!--/html_preserve-->


{% highlight r %}
set.seed(1014)
df <- data.frame(x1 = runif(5), x2 = runif(5), y1 = runif(5), y2 = runif(5))
df %>%
  ggvis(~x1, ~y1, x2 = ~x2, y2 = ~y2, fillOpacity := 0.1) %>%
  layer_rects()
{% endhighlight %}

<!--html_preserve--><div id="plot_id360903065-container" class="ggvis-output-container">
<div id="plot_id360903065" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id360903065_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id360903065" data-renderer="svg">SVG</a>
 | 
<a id="plot_id360903065_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id360903065" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id360903065_download" class="ggvis-download" data-plot-id="plot_id360903065">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id360903065_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "x2": "number",
          "y2": "number",
          "x1": "number",
          "y1": "number"
        }
      },
      "values": "\"x2\",\"y2\",\"x1\",\"y1\"\n0.466393497306854,0.195669834734872,0.0807501375675201,0.874600660754368\n0.497777388663962,0.403538117418066,0.834333037259057,0.174940626835451\n0.289767244597897,0.0636614572722465,0.600760886212811,0.0342413326725364\n0.732881987001747,0.388701313175261,0.157208441523835,0.320385730825365\n0.772521511185914,0.975547835230827,0.0073994412086904,0.402328238356858"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-0.0339472385938279\n0.875679717061576"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n-0.0128239924553782\n1.02261316035874"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x2": {
            "scale": "x",
            "field": "data.x2"
          },
          "y2": {
            "scale": "y",
            "field": "data.y2"
          },
          "fillOpacity": {
            "value": 0.1
          },
          "x": {
            "scale": "x",
            "field": "data.x1"
          },
          "y": {
            "scale": "y",
            "field": "data.y1"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x1"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y1"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id360903065").parseSpec(plot_id360903065_spec);
</script><!--/html_preserve-->


{% highlight r %}
df <- data.frame(x = 3:1, y = c(1, 3, 2), label = c("a", "b", "c"))
df %>% 
  ggvis(~x, ~y, text := ~label) %>% 
  layer_text(fontSize := 20, angle := 45)
{% endhighlight %}

<!--html_preserve--><div id="plot_id710542383-container" class="ggvis-output-container">
<div id="plot_id710542383" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id710542383_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id710542383" data-renderer="svg">SVG</a>
 | 
<a id="plot_id710542383_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id710542383" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id710542383_download" class="ggvis-download" data-plot-id="plot_id710542383">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id710542383_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "x": "number",
          "y": "number"
        }
      },
      "values": "\"label\",\"x\",\"y\"\n\"a\",3,1\n\"b\",2,3\n\"c\",1,2"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.9\n3.1"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0.9\n3.1"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "text",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "text": {
            "field": "data.label"
          },
          "x": {
            "scale": "x",
            "field": "data.x"
          },
          "y": {
            "scale": "y",
            "field": "data.y"
          },
          "fontSize": {
            "value": 20
          },
          "angle": {
            "value": 45
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "x"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "y"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 1440,
    "height": 1008
  },
  "handlers": null
};
ggvis.getPlot("plot_id710542383").parseSpec(plot_id710542383_spec);
</script><!--/html_preserve-->

